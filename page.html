<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Página Pública</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body{display:flex;justify-content:center;align-items:flex-start;padding:24px}
    .pub-container{width:420px}
    .notfound{color:#ffb4b4;border:1px solid #552c2c;background:#2a1414;padding:12px;border-radius:10px}
    .pub-header{margin-bottom:12px}
  </style>
</head>
<body>
  <div class="pub-container">
    <div id="warn" class="notfound" style="display:none"></div>
    <div class="phone">
      <div id="pubHeader" class="phone-header">
        <div class="avatar">+</div>
        <div class="texts">
          <div id="pubTitle" class="pv-title">Título</div>
          <div id="pubSubtitle" class="pv-subtitle">Subtítulo</div>
        </div>
      </div>
      <div id="pubButtons" class="phone-body"></div>
    </div>
  </div>

  <script>
    (function(){
      const slug = location.hash.replace('#','').trim();
      const warn = document.getElementById('warn');
      if(!slug){
        warn.style.display='block';
        warn.textContent = 'Link inválido. Falta o slug na URL (#slug).';
        return;
      }
      const KEY = 'anoig-public-' + slug;
      const raw = localStorage.getItem(KEY);
      if(!raw){
        warn.style.display='block';
        warn.textContent = 'Página não encontrada neste navegador. (No MVP real, os dados vêm do servidor.)';
        return;
      }
      try{
        const data = JSON.parse(raw);
        // header
        document.getElementById('pubTitle').textContent = data.header?.title || 'Título';
        document.getElementById('pubSubtitle').textContent = data.header?.subtitle || '';
        const header = document.getElementById('pubHeader');
        const preset = data.header?.preset || 'pattern1';
        if(preset === 'solid'){
          header.style.background = data.header?.color || '#1f2937';
        } else if(preset === 'pattern2'){
          header.style.background = 'linear-gradient(135deg,#283552,#1b2740)';
        } else {
          header.style.background = 'linear-gradient(135deg,#1f2937,#111827)';
        }
        // buttons
        const wrap = document.getElementById('pubButtons');
        wrap.innerHTML = '';
        (data.buttons||[]).forEach(b=>{
          const a = document.createElement('a');
          a.className = 'card-btn';
          a.target = '_blank';
          a.rel = 'noopener';
          a.href = b.link || '#';
          a.innerHTML = `
            <div class="card-inner">
              <div class="card-icon" style="background:${b.color || '#2b7a78'}"></div>
              <div class="card-label">${b.label || 'Botão'}</div>
            </div>`;
          wrap.appendChild(a);
        });
      }catch(e){
        warn.style.display='block';
        warn.textContent = 'Erro ao carregar dados.';
      }
    })();
  </script>
</body>
</html>
